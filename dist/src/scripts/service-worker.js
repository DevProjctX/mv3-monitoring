import{LocalStorage}from"./storage.js";var userId,projectId,storage=new LocalStorage,userTimeline=[],trackUserInMillis=2e3,USER_TIMELINE="user_timeline",USER_OFF_SCREEN="user_off_screen";async function getCurrentTabUrl(){let e="";try{let r={active:!0,currentWindow:!0},[t]=await chrome.tabs.query(r);e=null==t?USER_OFF_SCREEN:t.url}catch(e){console.error(e)}return console.log("tracking tab",e),e}async function addTabToUserTimeline(){var e=[await getCurrentTabUrl(),Date.now()];userTimeline.push(e),storage.saveValue(USER_TIMELINE,userTimeline),console.log("Added tab and timestamp")}async function getCurrentTab(){let[e]=await chrome.tabs.query({active:!0,currentWindow:!0});return console.log(e,e.url),e}function uploadData(){chrome.tabs.query({active:!0,currentWindow:!0},(function(e){e.length&&chrome.tabs.sendMessage(e[0].id,{action:"SendIt"},(function(e){console.log(e.farewell)}))}))}function trackCurrentActivity(){setInterval(addTabToUserTimeline,trackUserInMillis)}trackCurrentActivity();