class Tab{constructor(e,a,t,o){this.url=e,this.summaryTime=void 0!==t?t:0,this.counter=void 0!==o?o:0,this.days=void 0!==a?a:[]}incSummaryTime(){this.summaryTime+=1;var e=this.days.find((e=>e.date==todayLocalDate()));void 0===e?this.addNewDay(todayLocalDate()):e.summary+=1}getTodayTime(){return this.days.find((e=>e.date==todayLocalDate())).summary}incCounter(){this.counter+=1;var e=this.days.find((e=>e.date==todayLocalDate()));void 0===e?this.addNewDay(todayLocalDate()):e.counter+=1}addNewDay(e){this.days.push({date:e,summary:1,counter:1})}}class LocalStorage{loadTabs(e,a,t){chrome.storage.local.get(e,(function(o){if(void 0!==o[e]){var s=o[e];void 0!==s&&a(s)}else void 0!==t&&t()}))}saveTabs(e,a){chrome.storage.local.set({tabs:e}),void 0!==a&&a()}saveValue(e,a){chrome.storage.local.set({[e]:a})}getValue(e,a){chrome.storage.local.get(e,(function(t){void 0!==t&&a(t[e])}))}getMemoryUse(e,a){chrome.storage.local.getBytesInUse(e,a)}}var storage=new LocalStorage,tabs=[];function loadTabs(){storage.loadTabs("tabs",(function(e){if(tabs=[],null!=e){for(var a=0;a<e.length;a++){var t=new Tab(e[a].url,e[a].days,e[a].summaryTime,e[a].counter);tabs.push(t)}console.log("stored tabs ",tabs)}}))}function checkCurrentTab(){setInterval(getCurrentTab,2e3)}function bgCheckInterval(){setInterval(backgroundCheck,2e4)}function sendMessageInterval(){setInterval(sendMessage,15e3)}async function getCurrentTab(){let[e]=await chrome.tabs.query({active:!0,currentWindow:!0});return console.log(e,e.url),e}function sendMessage(){chrome.tabs.query({active:!0,currentWindow:!0},(function(e){e.length&&chrome.tabs.sendMessage(e[0].id,{action:"SendIt"},(function(e){console.log(e.farewell)}))}))}function backgroundCheck(){chrome.windows.getLastFocused({populate:!0},(function(e){if(e.focused){var a=e.tabs.find((e=>!0===e.active));if(void 0!==a){var t=a.url,o=new Tab(t);tabs.push(o),storage.saveTabs(tabs)}}else console.log("closeIntervalForCurrentTab")}))}loadTabs(),bgCheckInterval(),sendMessageInterval();