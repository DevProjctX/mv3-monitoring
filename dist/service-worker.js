console.log("This prints to the console of the service worker (background script)");class Tab{constructor(a,e,t,o){this.url=a,this.summaryTime=void 0!==t?t:0,this.counter=void 0!==o?o:0,this.days=void 0!==e?e:[]}incSummaryTime(){this.summaryTime+=1;var a=this.days.find((a=>a.date==todayLocalDate()));void 0===a?this.addNewDay(todayLocalDate()):a.summary+=1}getTodayTime(){return this.days.find((a=>a.date==todayLocalDate())).summary}incCounter(){this.counter+=1;var a=this.days.find((a=>a.date==todayLocalDate()));void 0===a?this.addNewDay(todayLocalDate()):a.counter+=1}addNewDay(a){this.days.push({date:a,summary:1,counter:1})}}class LocalStorage{loadTabs(a,e,t){chrome.storage.local.get(a,(function(o){if(void 0!==o[a]){var s=o[a];void 0!==s&&e(s)}else void 0!==t&&t()}))}saveTabs(a,e){chrome.storage.local.set({tabs:a}),void 0!==e&&e()}saveValue(a,e){chrome.storage.local.set({[a]:e})}getValue(a,e){chrome.storage.local.get(a,(function(t){void 0!==t&&e(t[a])}))}getMemoryUse(a,e){chrome.storage.local.getBytesInUse(a,e)}}var storage=new LocalStorage,tabs=[];function loadTabs(){storage.loadTabs("tabs",(function(a){if(tabs=[],null!=a){for(var e=0;e<a.length;e++){var t=new Tab(a[e].url,a[e].days,a[e].summaryTime,a[e].counter);tabs.push(t)}console.log("stored tabs ",tabs)}}))}function checkCurrentTab(){setInterval(getCurrentTab,2e3)}function bgCheckInterval(){setInterval(backgroundCheck,2e4)}async function getCurrentTab(){let[a]=await chrome.tabs.query({active:!0,currentWindow:!0});return console.log(a,a.url),a}function backgroundCheck(){chrome.windows.getLastFocused({populate:!0},(function(a){if(a.focused){var e=a.tabs.find((a=>!0===a.active));if(console.log("current tab",e),void 0!==e){var t=e.url;chrome.scripting.executeScript({target:{tabId:e.id,allFrames:!0},files:["./dist/bundle.js"]});var o=new Tab(t);console.log("new tab val is ",o),tabs.push(o),storage.saveTabs(tabs)}}else activity.closeIntervalForCurrentTab(!0)}))}loadTabs(),bgCheckInterval();