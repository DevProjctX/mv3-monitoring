(()=>{class e{constructor(e,a,t,o){this.url=e,this.summaryTime=void 0!==t?t:0,this.counter=void 0!==o?o:0,this.days=void 0!==a?a:[]}incSummaryTime(){this.summaryTime+=1;var e=this.days.find((e=>e.date==todayLocalDate()));void 0===e?this.addNewDay(todayLocalDate()):e.summary+=1}getTodayTime(){return this.days.find((e=>e.date==todayLocalDate())).summary}incCounter(){this.counter+=1;var e=this.days.find((e=>e.date==todayLocalDate()));void 0===e?this.addNewDay(todayLocalDate()):e.counter+=1}addNewDay(e){this.days.push({date:e,summary:1,counter:1})}}var a=new class{loadTabs(e,a,t){chrome.storage.local.get(e,(function(o){if(void 0!==o[e]){var s=o[e];void 0!==s&&a(s)}else void 0!==t&&t()}))}saveTabs(e,a){chrome.storage.local.set({tabs:e}),void 0!==a&&a()}saveValue(e,a){chrome.storage.local.set({[e]:a})}getValue(e,a){chrome.storage.local.get(e,(function(t){void 0!==t&&a(t[e])}))}getMemoryUse(e,a){chrome.storage.local.getBytesInUse(e,a)}},t=[];a.loadTabs("tabs",(function(a){if(t=[],null!=a){for(var o=0;o<a.length;o++){var s=new e(a[o].url,a[o].days,a[o].summaryTime,a[o].counter);t.push(s)}console.log("stored tabs ",t)}})),setInterval((function(){chrome.windows.getLastFocused({populate:!0},(function(o){if(o.focused){var s=o.tabs.find((e=>!0===e.active));if(void 0!==s){var r=s.url,i=new e(r);t.push(i),a.saveTabs(t)}}else console.log("closeIntervalForCurrentTab")}))}),2e4),setInterval((function(){chrome.tabs.query({active:!0,currentWindow:!0},(function(e){e.length&&chrome.tabs.sendMessage(e[0].id,{action:"SendIt"},(function(e){console.log(e.farewell)}))}))}),15e3)})();